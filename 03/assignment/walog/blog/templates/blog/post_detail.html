<div>
    <h1>제목 : {{ post.title }}</h1>
</div>

<h4>
    <span>
        작성자 : {{ post.created_by }}
    </span>
    <br>
    <span>
        작성 시간 : {{ post.created_at}} <br>
        마지막 수정 시간 : {{ post.updated_at }}
    </span>
    <br>
    <span>
        태그 : 
        {% for tag in post.tags.iterator %}
            {% if tag.name %}
                <a href="{% url 'post-tag-list' tag.name %}">{{ tag }}</a>
            {% endif %}

        {% endfor %}
    </span>
</h4>

<h4>
    {{ post.description }}
</h4>

<br>

{% if owner == True %}
    <form action="{% url 'post-update' post.id %}">
        <input type="submit" value="수정하기">
    </form>    
        
    <form action="{% url 'post-delete' post.id %}">
        <input type="submit" value="삭제하기">
    </form>
{% endif %}

<hr>
<h3>댓글</h3>
<hr>
{% if page.object_list %}
    <table>
        {% for com in page.object_list %}
            <!--앵커 추가-->
            <a id="comment_{{ com.id }}"></a>
            <tb>
                <h3>닉네임: {{ com.created_by }}</h3>
                <h4>
                    작성시간: {{ com.created_at }}
                    {% if com.is_updated %}
                        (수정됨)
                        <br>
                        마지막 수정시간 : {{ com.updated_at }}
                    {% endif %}
                    <br>
                    <span>
                        태그 : 
                        {% for tag in com.tags.iterator %}
                            {% if tag.name %}
                                <a href="{% url 'comment-tag-list' tag.name %}">{{ tag }}</a>
                            {% endif %}
                       {% endfor %}
                    </span>
                
                </h4>
                
                <h4>
                    {{ com.content }}
                </h4>


                
                {% if com.created_by == user or user.is_superuser %}

                    {% if com.id == edit_comment %}
                        <form action="{% url 'update_comment' com.id %}">
                            <textarea cols=40 rows=5 name="text">{{ com.content }}</textarea>
                    
                            <input type="submit" value="수정하기">
                        </form> 

                    {% else %}
                        <a href="{% url 'edit_comment' com.id %}">수정하기</a>
                    {% endif %}


                    <form action="{% url 'delete_comment' com.id %}">
                        <input type="submit" value="삭제하기">
                    </form>
                {% endif %}


                <br>
                <br>
            </tb>
            <hr>
        {% endfor %}    
    </table>


    
    <h3>
        <div>
            {% if page.has_previous %}
                <a href="?page={{ page.previous_page_number }}">prev</a> <br>
                <a href="?page=1">first</a>
            {% endif %}

            <span>
                <p>{{ page.number }} of {{ page.paginator.num_pages }}</p>
            </span>

            {% if page.has_next %}
                <a href="?page={{ page.next_page_number }}">next</a> <br>
                <a href="?page={{ page.paginator.num_pages }}">last</a>
            {% endif %}
                
        </div>
    </h3>

{% else %}
    댓글이 없습니다.
{% endif %}
<br>
<br>    

{% if user.is_authenticated %}
    <form action="{% url 'add_comment' post.id %}" method="post">{% csrf_token %}
        <textarea cols=40 rows=5 name="text"></textarea>
        <br>
        태그 : <input type="text" name="tags">
        <br>
        <input type="submit" value="게시">
    </form>
{% endif %}

<a href="{% url 'index' %}">메인 화면</a>

<br>

<a href="{% url 'post-list' %}">글 목록</a>